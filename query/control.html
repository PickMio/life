<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" href="lib/bootstrap.min.css">
<link href="lib/style.css" rel="stylesheet" type="text/css" />
<script src="lib/jquery.js" type="text/javascript"></script>
<script src="lib/bootstrap-transition.js"></script>
<script src="lib/bootstrap-modal.js"></script>
<script src="lib/bootstrap.min.js"></script> 
<meta charset="utf-8">
<meta HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate">
<title>项目控制</title>
</head>

<body style="background-image: url(lib/bg.png)">
<div class="mainframe">
<font color="white">

    <div id="workManage">
    <h3>添加工作量:</h3>
    <h5>选择员工:</h5>
    <select class="form-control" style="width: 50%;" id="staffList"> 
          
    </select>
    <h5>选择项目:</h5>
    <select class="form-control" style="width: 50%;" id="projectList"> 
         
    </select>
    <h5>数量:</h5>
    <input class="form-control" placeholder="输入工作数量:" id="work_num" style="width: 50%;">
    <button class="btn-primary btn" type="button" id="addProgress" style="text-align: right">添加</button> 
    </div>
<hr />

    <div id="staffManage">
    <h3>添加员工:</h3>
    <input class="form-control" placeholder="请输入员工姓名" id="staffName" style="width: 50%;display: inline">
    <select class="form-control" style="width: 50%;" id="staffSex">
          <option value=0>男</option> 
          <option value=1>女</option> 
    </select>
    <button class="btn btn-primary" type="button" id="addStaff">添加</button> 

    
    </div>
<hr />


    <div id="projectManage">
    <h3>添加项目:</h3>
    <input class="form-control" placeholder="请输入项目名称" id="projectName" style="width: 50%;">
    <button class="btn btn-primary" type="button" id="addProject" style="text-align: right">添加</button> 
<hr />
    




<div id="goodCount">
    
    <h3>选择年份:</h3>
    <select class="form-control" style="width: 25%;display:inline;" id="setGoodYear"> 
         <option value=2016>2016</option><option value=2017>2017</option><option value=2018>2018</option><option value=2019>2019</option>
         <option value=2020>2020</option><option value=2021>2021</option><option value=2022>2022</option><option value=2023>2023</option>
         <option value=2024>2024</option><option value=2025>2025</option><option value=2026>2026</option><option value=2027>2027</option>
         <option value=2028>2028</option><option value=2029>2029</option><option value=2030>2030</option><option value=2031>2031</option>
         <option value=2032>2032</option><option value=2033>2033</option><option value=2034>2034</option><option value=2035>2035</option>
         <option value=2036>2036</option><option value=2037>2037</option><option value=2038>2038</option><option value=2039>2039</option>
    </select>
    <h3>选择月份:</h3>
    <select class="form-control" style="width: 25%;display:inline;" id="setGoodMonth"> 
         <option value=1>1</option><option value=2>2</option><option value=3>3</option><option value=4>4</option>
         <option value=5>5</option><option value=6>6</option><option value=7>7</option><option value=8>8</option>
         <option value=9>9</option><option value=10>10</option><option value=11>11</option><option value=12>12</option>

    </select>
    <h3>设置优秀的数量:</h3>    
    <input class="form-control" placeholder="请输入数量" id="setGoodCount" style="width: 50%;">

    <h3>设置当月进度条的显示:</h3>    
    <input class="form-control" placeholder="请输入本月信息.如5/22" id="setTimeShow" style="width: 50%;">

    <button class="btn btn-primary" type="button" id="setGoodCountBtn" style="text-align: right">设置</button> 

</div>
<hr />

<button type="button" class="btn btn-primary" data-toggle="collapse" 
   data-target="#delManager">
   显示删除信息
</button>



    <div id="delManager" class="collapse">
    <hr />
    <h3>选择删除员工:</h3>
    <select class="form-control" style="width: 50%;" id="delStaffList"> 
         
    </select>
    <button class="btn btn-primary" type="button" id="delStaff">删除</button> 
    <h3>选择删项目:</h3>
    <select class="form-control" style="width: 50%;" id="delProjectList"> 
         
    </select>
    <button class="btn btn-primary" type="button" id="delProject">删除</button> 
    <hr />
    </div>


</font>

<!-- 模态对话框 -->
<div class="modal fade" id="mymodal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="modelTitle">提示</h4>
            </div>
            <div class="modal-body">                
                <div class="alert alert-success" id="modelMsg" role="alert">恭喜您操作成功！</div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal">确定</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->





<script type="text/javascript">
    $(function(){
        $("#addStaff").bind("click", function(){
            if("" == $("#staffName").val()){
                $("#modelMsg").attr("class","alert alert-danger");
                $("#mymodal").modal("toggle");$("#modelMsg").html("请输入员工名");
                return;
            }
            $.getJSON("http://localhost/query/query.php",{
                protocol: 3,
                name: $("#staffName").val(),
                sex: $("#staffSex").val()
            },
                /*不能直接跳转,不然登陆就没什么用了...*/
                //if (!data.success) {alert(data.msg);}
                function(result){
                   /* $.each(result, function(i, field){
                      $("p").append(field + " ");
                    });*/
                    $("#modelMsg").attr("class","alert alert-success");
                    if (!result.success) {$("#modelMsg").attr("class","alert alert-danger");}
                    $("#mymodal").modal("toggle");$("#modelMsg").html(result.msg);
                
            }
            );
        });


    });



    $(function(){
            $("#addProject").bind("click", function(){
                if("" == $("#projectName").val()){
                    $("#modelMsg").attr("class","alert alert-danger");
                    $("#mymodal").modal("toggle");$("#modelMsg").html("请输项目名称");
                    return;
                }
                $.getJSON("http://localhost/query/query.php",{
                    protocol:1,
                    name: $("#projectName").val(),
                },
                function(result){
                   /* $.each(result, function(i, field){
                      $("p").append(field + " ");
                    });*/
                    $("#modelMsg").attr("class","alert alert-success");
                    if (!result.success) {$("#modelMsg").attr("class","alert alert-danger");}
                    $("#mymodal").modal("toggle");$("#modelMsg").html(result.msg);
                
                }
                );
            });


        });


    <!-- 删除项目 -->
    $(function(){
                $("#delProject").bind("click", function(){

                    $.getJSON("http://localhost/query/query.php",{
                        protocol:2,
                        name: $("#delProjectList").val(),
                    },
                    function(result){                       
                        $("#modelMsg").attr("class","alert alert-success");
                        if (!result.success) {$("#modelMsg").attr("class","alert alert-danger");}
                        $("#mymodal").modal("toggle");$("#modelMsg").html(result.msg + ". 三秒后刷新此页面.");
                        /*跳出弹出框后三秒刷新*/
                        setTimeout(function () {
                        location.reload();
                        }, 3000);
                    }
                    );
                });


            });

    <!-- 删除员工 -->
    $(function(){
                $("#delStaff").bind("click", function(){

                    $.getJSON("http://localhost/query/query.php",{
                        protocol:4,
                        name: $("#delStaffList").val(),
                    },
                    function(result){                       
                        $("#modelMsg").attr("class","alert alert-success");
                        if (!result.success) {$("#modelMsg").attr("class","alert alert-danger");}
                        $("#mymodal").modal("toggle");$("#modelMsg").html(result.msg + ". 三秒后刷新此页面...");
                        /*跳出弹出框后三秒刷新*/
                        setTimeout(function () {
                        location.reload();
                        }, 3000);
                    }
                    );
                });


            });
    <!-- 加载项目和角色信息 -->
    $(function(){                
                    $.getJSON("http://localhost/query/query.php",{
                        protocol:10,
                    },
                    function(result){
                        if (!result.success) {$("#modelMsg").attr("class","alert alert-danger");$("#mymodal").modal("toggle");$("#modelMsg").html(result.msg);return;}
                        $.each(result.msg, function(i, field){
                          $("#projectList").append("<option value=" + field["project_name"] + ">" +field["project_name"] + "</option>");  
                          $("#delProjectList").append("<option value=" + field["project_name"] + ">" +field["project_name"] + "</option>");                   
                        });
                    }
                    );
                     $.getJSON("http://localhost/query/query.php",{
                        protocol:9,
                    },
                    function(result){
                        $("#modelMsg").attr("class","alert alert-success");
                        if (!result.success) {$("#modelMsg").attr("class","alert alert-danger");$("#mymodal").modal("toggle");$("#modelMsg").html(result.msg);return;}
                        $.each(result.msg, function(i, field){
                          $("#staffList").append("<option value=" + field["staff_name"] + ">" +field["staff_name"] + "</option>"); 
                          $("#delStaffList").append("<option value=" + field["staff_name"] + ">" +field["staff_name"] + "</option>");                         
                        });
                    }
                    );
            });

    $(function(){
            $("#addProgress").bind("click", function(){
                $.getJSON("http://localhost/query/query.php",{
                    protocol:5,
                    staff: $("#staffList").val(),
                    project: $("#projectList").val(),
                    count: $("#work_num").val(),
                },
                function(result){
                    $("#modelMsg").attr("class","alert alert-success");          
                    if (!result.success) {$("#modelMsg").attr("class","alert alert-danger");}
                    $("#mymodal").modal("toggle");$("#modelMsg").html(result.msg);
                }
                );


        });
    });


    $(function(){
                $("#setGoodCount").val(30);

                var myDate = new Date(); 
                var year = myDate.getFullYear();
                var month = myDate.getMonth()+1;
                $("#setGoodMonth").val(month);
                $("#setGoodYear").val(year);
                $("#setGoodCountBtn").bind("click", function(){

                    $.getJSON("http://localhost/query/query.php",{
                        protocol:11,
                        year: $("#setGoodYear").val(),
                        month: $("#setGoodMonth").val(),
                        count: $("#setGoodCount").val(),
                        timeShow: $("#setTimeShow").val(),
                    },
                    function(result){                       
                        $("#modelMsg").attr("class","alert alert-success");
                        if (!result.success) {$("#modelMsg").attr("class","alert alert-danger");}
                        $("#mymodal").modal("toggle");$("#modelMsg").html(result.msg);
                       
                });
            });
        });


            


</script>>

</body>
<html>
